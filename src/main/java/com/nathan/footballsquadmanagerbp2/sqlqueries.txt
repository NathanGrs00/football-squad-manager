CREATE DATABASE f_squad_manager;

CREATE TABLE `f_squad_manager`.`user` (`id` INT(11) NOT NULL AUTO_INCREMENT , `first_name` VARCHAR(15) NOT NULL , `last_name` VARCHAR(20) NOT NULL , `password` VARCHAR(15) NOT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `f_squad_manager`.`formation` (`id` INT(2) NOT NULL AUTO_INCREMENT , `name` VARCHAR(30) NOT NULL , `abbreviation` VARCHAR(3) NOT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `f_squad_manager`.`selection` (`id` INT(11) NOT NULL AUTO_INCREMENT , `name` VARCHAR(9) NULL , `date` DATE NOT NULL , `user_id` INT(11) NOT NULL , `formation_id` INT(2) NULL PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `f_squad_manager`.`position` (`id` INT(2) NOT NULL AUTO_INCREMENT , `name` VARCHAR(25) NOT NULL , `abbreviation` VARCHAR(3) NOT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `f_squad_manager`.`player` (`id` INT(11) NOT NULL AUTO_INCREMENT , `first_name` VARCHAR(15) NOT NULL , `last_name` VARCHAR(20) NOT NULL , `age` INT(2) NOT NULL , `pref_foot` VARCHAR(1) NOT NULL , `status` VARCHAR(15) NOT NULL , PRIMARY KEY (`id`)) ENGINE = InnoDB;

CREATE TABLE `f_squad_manager`.`player_position` (`player_id` INT(11) NOT NULL , `position_id` INT(2) NOT NULL , `proficiency` INT(1) NOT NULL DEFAULT '0' ) ENGINE = InnoDB;
CREATE TABLE `f_squad_manager`.`formation_position` (`formation_id` INT(2) NOT NULL , `position_id` INT(2) NOT NULL ) ENGINE = InnoDB;
CREATE TABLE `f_squad_manager`.`selection_details` (`selection_id` INT(11) NOT NULL , `player_id` INT(11) NOT NULL , `position_id` INT(2) NOT NULL ) ENGINE = InnoDB;

ALTER TABLE formation_position
ADD CONSTRAINT fk_formation_id FOREIGN KEY (formation_id) REFERENCES formation(id),
ADD CONSTRAINT fk_position_id FOREIGN KEY (position_id) REFERENCES position(id);

ALTER TABLE player_position
ADD CONSTRAINT fk_player_id FOREIGN KEY (player_id) REFERENCES player(id),
ADD CONSTRAINT fk_pposition_id FOREIGN KEY (position_id) REFERENCES `position`(id);

ALTER TABLE selection_details
ADD CONSTRAINT fk_splayer_id FOREIGN KEY (player_id) REFERENCES player(id),
ADD CONSTRAINT fk_sposition_id FOREIGN KEY (position_id) REFERENCES `position`(id),
ADD CONSTRAINT fk_sselection_id FOREIGN KEY (selection_id) REFERENCES selection(id);

ALTER TABLE `selection`
ADD CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES `user`(id);